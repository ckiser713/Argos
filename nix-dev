#!/bin/bash
# Wrapper script to enter Nix development shell with proper group context

# Check if user is in nixbld group
if ! groups | grep -q nixbld; then
    echo "Note: You're not in the nixbld group in this shell session."
    echo "Starting a new shell session with nixbld group..."
    echo ""
    exec newgrp nixbld << 'NIXDEV_EOF'
cd /home/nexus/Argos_Chatgpt
source ~/.nix-profile/etc/profile.d/nix.sh 2>/dev/null || source /etc/profile.d/nix.sh 2>/dev/null || true
nix develop "$@"
NIXDEV_EOF
else
    # Already in the group, just run nix develop
    cd /home/nexus/Argos_Chatgpt
    source ~/.nix-profile/etc/profile.d/nix.sh 2>/dev/null || source /etc/profile.d/nix.sh 2>/dev/null || true
    nix develop "$@"
fi



